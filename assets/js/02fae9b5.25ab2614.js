"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[395],{1198:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"type":"mdx","permalink":"/loader/","source":"@site/pages/index.md","title":"\u2699\ufe0f Loader","description":"A lightweight, lifecycle-aware module loader for Roblox. This utility ensures a consistent init \u2192 start boot process across your game\u2019s services and modules. Designed for modular architecture, dependency safety, and async initialization.","frontMatter":{},"unlisted":false}');var a=l(4848),s=l(8453);const i={},o="\u2699\ufe0f Loader",d={},c=[{value:"\ud83d\ude80 Key Features",id:"-key-features",level:2},{value:"\ud83d\udce6 Installation",id:"-installation",level:2},{value:"\ud83d\udcdc Module Lifecycle Order",id:"-module-lifecycle-order",level:2}];function t(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"\ufe0f-loader",children:"\u2699\ufe0f Loader"})}),"\n",(0,a.jsxs)(n.p,{children:["A lightweight, lifecycle-aware module loader for Roblox. This utility ensures a consistent ",(0,a.jsx)(n.code,{children:"init \u2192 start"})," boot process across your game\u2019s services and modules. Designed for modular architecture, dependency safety, and async initialization."]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\u26a0\ufe0f This is a ",(0,a.jsx)(n.strong,{children:"Promise-based"})," module loader. You should be familiar with ",(0,a.jsx)(n.a,{href:"https://eryn.io/roblox-lua-promise/",children:"Promise"})," usage in Roblox to use it effectively."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-key-features",children:"\ud83d\ude80 Key Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\ud83d\udd01 ",(0,a.jsx)(n.strong,{children:"Consistent Lifecycle"}),": Each module can optionally export ",(0,a.jsx)(n.code,{children:"init()"})," and ",(0,a.jsx)(n.code,{children:"start()"})," for structured loading."]}),"\n",(0,a.jsxs)(n.li,{children:["\u23f3 ",(0,a.jsx)(n.strong,{children:"Async Safety"}),": Modules are ",(0,a.jsx)(n.code,{children:"required"})," safely, and ",(0,a.jsx)(n.code,{children:"start()"})," is deferred until ",(0,a.jsx)(n.code,{children:"init()"})," of all modules is complete."]}),"\n",(0,a.jsxs)(n.li,{children:["\ud83e\udde9 ",(0,a.jsx)(n.strong,{children:"Dependency Coordination"}),": Use ",(0,a.jsx)(n.code,{children:'waitFor("ModuleName")'})," to safely depend on another module\u2019s completion."]}),"\n",(0,a.jsxs)(n.li,{children:["\ud83d\udce6 ",(0,a.jsx)(n.strong,{children:"Batch Loading"}),": Load all children or descendant ",(0,a.jsx)(n.code,{children:"ModuleScripts"})," from a container."]}),"\n",(0,a.jsxs)(n.li,{children:["\ud83e\ude9b ",(0,a.jsx)(n.strong,{children:"Runtime Configuration"}),": Enable logs, switch to full instance names, or change logging prefix dynamically."]}),"\n",(0,a.jsxs)(n.li,{children:["\ud83e\uddea ",(0,a.jsx)(n.strong,{children:"Exposed Internals"}),": Useful for extending behavior, debugging, or hooking into loader internals."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-installation",children:"\ud83d\udce6 Installation"}),"\n",(0,a.jsxs)(n.p,{children:["Drop the module into your project and ",(0,a.jsx)(n.code,{children:"require()"})," it once during bootstrap."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"local Loader = require(path.to.loader)\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.h2,{id:"-module-lifecycle-order",children:"\ud83d\udcdc Module Lifecycle Order"}),"\n",(0,a.jsx)(n.p,{children:"Each module can export the following optional functions:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"init(): () -> ()\n-- Called immediately after require().\n-- Use it to set up values, caches, or internal state.\n-- All init() methods are called before any start().\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"start(): () -> ()\n-- Called after all modules\u2019 init() have run.\n-- Use this to begin logic, connect systems, or run loops.\n-- Automatically runs asynchronously.\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"waitFor(name: string): Promise<any>\n-- Provided automatically in each module\u2019s returned table.\n-- Lets you await other modules\u2019 startup before proceeding.\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.p,{children:"\ud83e\udde9 Public API"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"loader.load_children(container: Instance, predicate?: (Instance) -> boolean): Promise<boolean>\n-- Loads all ModuleScripts that are direct children of the container.\n-- If a predicate is provided, only ModuleScripts where predicate(module) == true will be loaded.\n-- \u2705 Optional predicate to filter modules.\n-- \u2705 Returns a Promise that resolves after all modules are started.\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"Loader:load_children(game.ReplicatedStorage.Modules)\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"loader.load_descendants(container: Instance, predicate?: (Instance) -> boolean): Promise<boolean>\n-- Loads all ModuleScripts found recursively in the container\u2019s descendants.\n-- If a predicate is provided, only ModuleScripts where predicate(module) == true will be loaded.\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"Loader:load_descendants(game.ServerScriptService.Services)\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.p,{children:"\ud83d\udd0d Predicate Examples"}),"\n",(0,a.jsxs)(n.p,{children:["Here are some example predicates you can pass into ",(0,a.jsx)(n.code,{children:"load_children"})," or ",(0,a.jsx)(n.code,{children:"load_descendants"})," to control which modules are loaded:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'-- Load only modules whose name ends with "Service"\nlocal function endsWithService(module)\n    return module.Name:match("Service$") ~= nil\nend\n\nLoader:load_descendants(script.Modules, endsWithService)\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'-- Load only modules that have a specific tag\nlocal CollectionService = game:GetService("CollectionService")\n\nlocal function isTagged(module)\n    return CollectionService:HasTag(module, "LoadMe")\nend\n\nLoader:load_descendants(script.Modules, isTagged)\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'-- Load only modules in a specific namespace\nlocal function isCoreModule(module)\n    return module.Name:sub(1, 5) == "Core_"\nend\n\nLoader:load_children(script.Modules, isCoreModule)\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"loader.exposeInternal(): internal\n-- Reveals internal utilities for advanced use or debugging.\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'local internal = Loader.exposeInternal()\ninternal.change_env_const("USE_FULL_NAME", true)\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.p,{children:"\ud83d\udd27 Internal API (via exposeInternal())"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"-- Logging\nlog.print(msg: string)\nlog.warn(msg: string)\nlog.error(msg: string)\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'-- Configuration\nchange_env_const(key: "LOGGING_ENABLED" | "LOGGING_PREFIX" | "USE_FULL_NAME", value: any)\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"-- Module Tools\ngetInstanceName(instance: Instance): string\nwaitFor(moduleName: string): Promise\nsafeRequire(moduleScript: ModuleScript): Promise\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.p,{children:"\u2705 Best Practices"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\u2705 Use ",(0,a.jsx)(n.code,{children:"init()"})," for setup logic and ",(0,a.jsx)(n.code,{children:"start()"})," for beginning execution."]}),"\n",(0,a.jsxs)(n.li,{children:["\u2705 Use ",(0,a.jsx)(n.code,{children:'waitFor("ModuleName")'})," to safely coordinate between modules."]}),"\n",(0,a.jsxs)(n.li,{children:["\u2705 Use ",(0,a.jsx)(n.code,{children:"loader.load_descendants(...)"})," to recursively load all modules from a centralized folder."]}),"\n",(0,a.jsxs)(n.li,{children:["\u274c Avoid chaining ",(0,a.jsx)(n.code,{children:"require()"})," calls that assume the target module has already completed startup."]}),"\n",(0,a.jsx)(n.li,{children:"\u274c Don\u2019t create circular dependencies between modules."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.p,{children:"\ud83d\udcc1 Example Module"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'-- PlayerService.lua\n\nlocal PlayerService = {}\n\nfunction PlayerService.init()\n    print("PlayerService initializing...")\nend\n\nfunction PlayerService.start()\n    print("PlayerService starting...")\nend\n\nreturn PlayerService\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,a.jsx)(n.p,{children:"\ud83e\uddea Example Bootstrap"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'local Loader = require(script.Parent.Loader)\n\nLoader:load_descendants(game.ServerScriptService.Modules):andThen(function()\n    print("All modules loaded and started.")\nend)\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>i,x:()=>o});var r=l(6540);const a={},s=r.createContext(a);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);